{"version":3,"file":"src_app_pages_product_product_module_ts.js","mappings":"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","sources":["./src/app/pages/product/product-routing.module.ts","./src/app/pages/product/product.module.ts","./src/app/pages/product/product.page.ts","./src/app/services/list.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProductPage } from './product.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProductPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProductPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProductPageRoutingModule } from './product-routing.module';\n\nimport { ProductPage } from './product.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProductPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [ProductPage]\n})\nexport class ProductPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Product, User } from 'src/app/models/interfaces';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { DataService } from 'src/app/services/data.service';\nimport { DatabaseService } from 'src/app/services/database.service';\nimport { ListService } from 'src/app/services/list.service';\n\n@Component({\n  selector: 'app-product',\n  templateUrl: './product.page.html',\n  styleUrls: ['./product.page.scss'],\n})\nexport class ProductPage implements OnInit {\n\n  private productId: string;\n\n  public product: Product;\n  private productSubscription: Subscription;\n\n  public userData: User;\n  private userDataSubscription: Subscription;\n\n\n  constructor(\n    private auth: AuthService,\n    private db: DatabaseService,\n    private data: DataService,\n    private list: ListService,\n  ) {\n    this.product = this.data.getCleanProduct();\n    this.userData = this.data.getCleanUser();\n    this.productId = this.data.getProductId();\n   }\n\n  ngOnInit() {}\n\n  ionViewWillEnter() {\n    this.getProductSubscription();\n    this.userSubscription();\n  }\n\n  getProductSubscription() {\n    this.productSubscription = this.db.readDocument<Product>('products', this.productId).subscribe(async product => {\n      this.product = product;\n    })\n  }\n\n  userSubscription() {\n    this.auth.getUid().then(currentUserId => {\n      this.userDataSubscription = this.db.readDocument<User>('users', currentUserId).subscribe(userData => {\n        this.userData = userData;\n      })\n    })\n  }\n\n  ionViewWillLeave() {\n    this.productSubscription.unsubscribe();\n    this.userDataSubscription.unsubscribe();\n  }\n\n  addToWishlist(productId: string) {\n    this.list.addToWishlist(productId, this.userData);\n  }\n\n  removeFromWishlist(productId: string) {\n    this.list.removeFromWishList(productId, this.userData);\n  }\n\n  isInWishlist(productId: string): boolean {\n    return this.list.isInWishlist(this.userData.wishlist, productId);\n  }\n\n  \n\n}\n","import { Injectable } from '@angular/core';\nimport { User } from '../models/interfaces';\nimport { DatabaseService } from './database.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ListService {\n\n  constructor(\n    private db: DatabaseService,\n  ) { }\n\n  isInWishlist(wishlist: string[], productId: string): boolean {\n    return wishlist.indexOf(productId) > -1;\n  }\n\n  addToWishlist(productId: string, user: User) {\n    if (!this.isInWishlist(user.wishlist, productId)) {\n      user.wishlist.push(productId);\n      this.db.updateDocument(user, 'users', user.id);\n    }\n  }\n\n  removeFromWishList(productId: string, user: User){\n    user.wishlist.forEach((value, index) => {\n      if (value === productId) {\n        user.wishlist.splice(index, 1)\n      }\n    })\n    this.db.updateDocument(user, 'users', user.id)\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}